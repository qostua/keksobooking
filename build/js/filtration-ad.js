import{isMapFormFiltersActive,isMapFormFeaturesActive,getActiveFiltersMapForm,getActiveFeaturesMapForm}from"./map-form.js";const MAX_ADS_COUNT=10,isAdOptionsMatch=(e,t)=>{const{type:r,priceRange:s,rooms:i,guests:o}=t,a=!r||r===e.type,c=!i||i===String(e.rooms),F=!o||o===String(e.guests),p=e.price>=s.start&&e.price<s.end;return a&&c&&F&&p},isAdFeaturesMatch=(e,t)=>{const r=e.features;if(!r)return!1;return r.reduce(((e,r)=>(t.includes(r)&&e++,e)),0)===t.length},getFilteredAds=e=>{if(!isMapFormFiltersActive()&&!isMapFormFeaturesActive())return e.slice(0,10);const t=[],r=getActiveFiltersMapForm(),s=getActiveFeaturesMapForm();for(let i=0;i<e.length&&(isMapFormFiltersActive()&&!isAdOptionsMatch(e[i].offer,r)||isMapFormFeaturesActive()&&!isAdFeaturesMatch(e[i].offer,s)||(t.push(e[i]),10!==t.length));i++);return t};export{getFilteredAds};