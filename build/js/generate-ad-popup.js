import{getNoun}from"./utils.js";import{getFilteredAds}from"./filtration-ad.js";const offerTypes={palace:"Дворец",flat:"Квартира",house:"Дом",bungalow:"Бунгало",hotel:"Гостиница"},cardTemplate=document.querySelector("#card").content.querySelector(".popup"),generateOfferFeaturesList=(e,t)=>{const o=e.querySelector(".popup__features"),r=o.querySelector(".popup__feature").cloneNode(!0);o.innerHTML="";const p=new DocumentFragment;for(const e of t){const t=r.cloneNode(!0);t.className=`popup__feature popup__feature--${e}`,p.append(t)}o.append(p)},generateOfferPhotosList=(e,t)=>{const o=e.querySelector(".popup__photos"),r=o.querySelector(".popup__photo").cloneNode(!0);o.innerHTML="";const p=new DocumentFragment;for(const e of t){const t=r.cloneNode(!0);t.src=e,p.append(t)}o.append(p)},setAuthorData=(e,t)=>{e.querySelector(".popup__avatar").src=t.avatar},setOfferData=(e,t)=>{e.querySelector(".popup__title").textContent=t.title,e.querySelector(".popup__text--address").textContent=t.address,e.querySelector(".popup__text--price").childNodes[0].textContent=t.price,e.querySelector(".popup__type").textContent=offerTypes[t.type],e.querySelector(".popup__text--capacity").textContent=`\n    ${t.rooms}\n    ${getNoun(t.rooms,"комната","комнаты","комнат")} для\n    ${t.guests}\n    ${getNoun(t.guests,"гостя","гостей","гостей")}`,e.querySelector(".popup__text--time").textContent=`Заезд после ${t.checkin}, выезд до ${t.checkout}`,t.features?generateOfferFeaturesList(e,t.features):e.querySelector(".popup__features").remove(),""===t.description?e.querySelector(".popup__description").remove():e.querySelector(".popup__description").textContent=t.description,t.photos?generateOfferPhotosList(e,t.photos):e.querySelector(".popup__photos").remove()},setLocationData=(e,t)=>{e.dataset.lat=t.lat,e.dataset.lng=t.lng},generateAdPopup=e=>{const t=cardTemplate.cloneNode(!0);return setAuthorData(t,e.author),setOfferData(t,e.offer),setLocationData(t,e.location),t},generatePopupList=e=>getFilteredAds(e).map((e=>generateAdPopup(e)));export{generatePopupList};